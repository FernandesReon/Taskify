<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="~{base :: parent(~{:: #content}, ~{:: title}, ~{})}">
<head>
    <title>Dashboard Page</title>
</head>
<body>
<div id="content">
    <section class="dashboard" id="dashboard">
        <div class="container">

            <h1>Welcome to Taskify <span th:text="${loggedUser.name}"></span></h1>

            <div class="dashboard-header">
                <form action="#" method="get">
                    <label for="search">Search for task</label>
                    <input type="search" name="search" id="search" placeholder="Enter your task name or keyword"
                           autocomplete="off">
                </form>

                <div class="header-actions">

                    <a th:href="@{/user/addTask}" class="button"><ion-icon name="add-outline"></ion-icon>New Task</a>

                    <label for="action"></label>
                    <select name="" id="action">
                        <option value="" disabled selected>Actions</option>
                        <option value="mass edit">Mass Edit</option>
                        <option value="delete all">Delete All</option>
                    </select>

                    <label for="category"></label>
                    <select name="" id="category">
                        <option value="" disabled selected>Filter</option>
                        <option value="bills">Bills</option>
                        <option value="housing">Housing</option>
                        <option value="foods & drinks">Food & Drinks</option>
                        <option value="others">Others</option>
                    </select>

                </div>
            </div>
            <div class="hr" style="margin: 0.6rem auto;"></div>

            <div class="dashboard-data">
                <!-- Task cards -->
                <div class="card" th:each="task : ${taskList}">
                    <div class="card-body">

                        <div class="card-header">
                            <span class="title" th:text="${task.title}">Task Title</span>
                            <div class="task-actions">
                                <a th:href="@{/user/updateTask(id=${task.id})}" class="edit-btn">‚úèÔ∏è</a>
                                <a th:href="@{/user/deleteTask(id=${task.id})}" class="delete-btn">üóëÔ∏è</a>
                                <a th:href="@{/user/completeTask(id=${task.id})}" class="complete-btn">‚úÖ</a>
                            </div>
                        </div>
                        <div>
                            <p class="description" th:text="${task.description}">
                                Task description goes here.
                            </p>
                        </div>
                        <div class="period">
                            <div>
                                <span class="date" th:text="'üìÖ' + ${task.localDate}"></span>
                            </div>
                            <div>
                                <span class="time" th:text="'‚åö' + ${task.localTime}"></span>
                            </div>
                        </div>

                        <div class="classification">
                            <div>
                                <span class="status task-stats" th:text="${task.status}">COMPLETED</span>
                            </div>
                            <div>
                                <span class="priority task-stats" th:text="${task.priority}">MEDIUM</span>
                            </div>
                            <div>
                                <span class="category task-stats" th:text="${task.category}">ELECTRONICS</span>
                            </div>
                        </div>

                    </div>
                </div>
            </div>


        </div>
    </section>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // Color mappings for status, priority, and category
        const colorMappings = {
            // Status colors
            NOT_STARTED: { background: "#D3D3D3", color: "#4F4F4F" },
            IN_PROGRESS: { background: "#ADD8E6", color: "#000080" },
            COMPLETED: { background: "#90EE90", color: "#006400" },
            CANCELED: { background: "#FFA07A", color: "#8B0000" },
            PENDING: { background: "#FFFACD", color: "#B8860B" },
            BLOCKED: { background: "#FFDAB9", color: "#FF4500" },
            ARCHIVED: { background: "#E6E6FA", color: "#800080" },

            // Priority colors
            CRITICAL: { background: "#FF4500", color: "#FFFFFF" },
            HIGH: { background: "#FFA500", color: "#000000" },
            MEDIUM: { background: "#FFD700", color: "#000000" },
            LOW: { background: "#32CD32", color: "#FFFFFF" },

            // Category colors
            FOOD_DRINKS: { background: "#FFB6C1", color: "#8B0000" },
            SHOPPING: { background: "#87CEEB", color: "#00008B" },
            HOUSING: { background: "#FFE4B5", color: "#8B4513" },
            BILLS: { background: "#ADD8E6", color: "#00008B" },
            TRANSPORT: { background: "#98FB98", color: "#006400" },
            VEHICLE: { background: "#FFDAB9", color: "#8B4513" },
            ELECTRONICS: { background: "#DDA0DD", color: "#4B0082" },
            LEISURE: { background: "#FF69B4", color: "#8B0000" },
            OTHER: { background: "#D3D3D3", color: "#4F4F4F" },
        };

        // Apply colors dynamically
        const elements = document.querySelectorAll(".task-stats");
        elements.forEach((element) => {
            const text = element.textContent.trim(); // Get the text content of the element
            const colorInfo = colorMappings[text]; // Get color info based on text

            if (colorInfo) {
                element.style.backgroundColor = colorInfo.background;
                element.style.color = colorInfo.color;
                element.style.padding = "0.4rem"; // Optional: Add padding for better visibility
                element.style.borderRadius = "0.2rem"; // Optional: Add rounded corners
            }
        });
    });
</script>
</body>
</html>
